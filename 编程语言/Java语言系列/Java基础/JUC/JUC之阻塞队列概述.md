# JUC的阻塞队列概述
主要介绍了什么是阻塞队列以及Java中阻塞队列的4中处理方式。

## 什么是阻塞队列
阻塞队列（BlockingQueue）是一个支持两个附加操作的队列。这两个附加的操作支持阻塞的插入和移除方法。

1. 支持阻塞的插入方法：当队列为满时，队列会阻塞插入元素的线程，直到队列不满
2. 支持阻塞的移除方法：当队列为空时，获取元素的线程会等待队列变为非空

阻塞队列常用于生产者和消费者场景，生产者是向队列中添加元素的线程，消费者是从队列中取出元素的线程。阻塞队列就是生产者用来存放元素，消费者用来获取元素的容器。

在阻塞队列不可用时，这两个附加操作提供了四种处理方式：

|方法/处理方式| 抛出异常| 返回特殊值|一直阻塞|超时退出|
| ---| --- | --- | --- | --- |
|插入方法   | add(e)   | offer(e)  | put(e)  | offer(e, time, unit)  |
|移除方法   | remove()  | poll()  | take()  | poll(time, unit)  |
|检查方法   | element()  | peek()  | 不可用  | 不可用  |

- 抛出异常： 当队列满时，如果继续向队列中插入元素，会抛出`IllegalStateException`(`Queue full`)异常。 当队列为空时，从队列里获取元素会抛出`NoSuchElementException`异常。
- 返回特殊值： 当向队列中插入元素时，会返回元素是否插入成功，成功返回true。如果是移除方法，则是从队列中取出一个元素，如果没有则返回null
- 一直阻塞：当队列满时，如果生产者线程向队列中`put`元素，队列会一直阻塞生产者线程，直到队列可用或者响应中断退出。当队列为空时，如果消费者线程从队列里`take`元素，队列会阻塞消费者线程，直到队列不为空。
- 超时退出： 当队列满时，如果生产者线程继续向队列中插入元素，队列会阻塞生产者线程一段时间，如果超过了指定的时间，生产者线程就会退出。

这里需要特别注意：`如果是无界阻塞队列，队列不可能会出现满的情况，所以用put或offer方法永远不会被阻塞，而且使用offer方法时，该方法永远返回true`
